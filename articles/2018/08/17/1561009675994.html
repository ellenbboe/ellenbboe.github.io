<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="theme-color" content="#3b3e43"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no"/><title>Scrapy Pass 4 - Kosmos</title><meta name="description" content="Command line tool New in version 0.10. Scrapy is controlled through the scrapy command-line tool, to be referred here as the “Scrapy tool” to differentiate it from the sub-commands, which we just call “commands” or “Scrapy commands”. The Scrapy tool provides several commands, for multiple purposes, and each one accepts a different set of arguments and options. Configuration settings Scrapy will look for configuration parameters in ini-style scrapy.cfg files in standard locations: /etc/scrapy.cf...."/><meta property="og:description" content="Command line tool New in version 0.10. Scrapy is controlled through the scrapy command-line tool, to be referred here as the “Scrapy tool” to differentiate it from the sub-commands, which we just call “commands” or “Scrapy commands”. The Scrapy tool provides several commands, for multiple purposes, and each one accepts a different set of arguments and options. Configuration settings Scrapy will look for configuration parameters in ini-style scrapy.cfg files in standard locations: /etc/scrapy.cf...."/>    <meta name="keywords" content="开源,开发者,笔记,kosmos"/><link rel="dns-prefetch" href="https://ellenbboe.github.io"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://ellenbboe.github.io"><link rel="icon" type="image/png" href="https://s2.ax1x.com/2020/01/12/loApPe.png"/><link rel="apple-touch-icon" href="https://s2.ax1x.com/2020/01/12/loApPe.png"><link rel="shortcut icon" type="image/x-icon" href="https://s2.ax1x.com/2020/01/12/loApPe.png"><meta name="copyright" content="B3log"/><meta http-equiv="Window-target" content="_top"/><meta property="og:locale" content="zh_CN"/><meta property="og:title" content="Scrapy Pass 4 - Kosmos"/><meta property="og:site_name" content="Kosmos"/><meta property="og:url"      content="https://ellenbboe.github.io/articles/2018/08/17/1561009675994.html?"/><meta property="og:image" content="https://s2.ax1x.com/2020/01/12/loApPe.png"/><link rel="search" type="application/opensearchdescription+xml" title="Scrapy Pass 4 - Kosmos" href="/opensearch.xml"><link href="https://ellenbboe.github.io/rss.xml" title="RSS" type="application/rss+xml" rel="alternate"/><link rel="manifest" href="https://ellenbboe.github.io/manifest.json">        <link rel="canonical" href="https://ellenbboe.github.io/articles/2018/08/17/1561009675994.html">        <link rel="stylesheet"
              href="https://ellenbboe.github.io/skins/Casper/css/base.css?1591150301084"/>
            <link rel="prev" title="2018-08-17" href="https://ellenbboe.github.io/articles/2018/08/17/1561009684132.html">
            <link rel="next" title="2018-08-18" href="https://ellenbboe.github.io/articles/2018/08/18/1561009681248.html">
    <script>
onload = function() {
    var click_cnt = 0;
    var $html = document.getElementsByTagName("html")[0];
    var $body = document.getElementsByTagName("body")[0];
    $html.onclick = function(e) {
        var $elem = document.createElement("b");
        $elem.style.color = "#E94F06";
        $elem.style.zIndex = 9999;
        $elem.style.position = "absolute";
        $elem.style.select = "none";
        var x = e.pageX;
        var y = e.pageY;
        $elem.style.left = (x - 10) + "px";
        $elem.style.top = (y - 20) + "px";
        clearInterval(anim);
        switch (++click_cnt) {
            case 10:
                $elem.innerText = "OωO";
                break;
            case 20:
                $elem.innerText = "(๑•́ ∀ •̀๑)";
                break;
            case 30:
                $elem.innerText = "(๑•́ ₃ •̀๑)";
                break;
            case 40:
                $elem.innerText = "(๑•̀_•́๑)";
                break;
            case 50:
                $elem.innerText = "（￣へ￣）";
                break;
            case 60:
                $elem.innerText = "(╯°口°)╯(┴—┴";
                break;
            case 70:
                $elem.innerText = "૮( ᵒ̌皿ᵒ̌ )ა";
                break;
            case 80:
                $elem.innerText = "╮(｡>口<｡)╭";
                break;
            case 90:
                $elem.innerText = "( ง ᵒ̌皿ᵒ̌)ง⁼³₌₃";
                break;
            case 100:
            case 101:
            case 102:
            case 103:
            case 104:
            case 105:
                $elem.innerText = "(ꐦ°᷄д°᷅)";
                break;
            default:
                $elem.innerText = "❤";
                break;
        }
        $elem.style.fontSize = Math.random() * 10 + 8 + "px";
        var increase = 0;
        var anim;
        setTimeout(function() {
            anim = setInterval(function() {
                if (++increase == 150) {
                    clearInterval(anim);
                    $body.removeChild($elem);
                }
                $elem.style.top = y - 20 - increase + "px";
                $elem.style.opacity = (150 - increase) / 120;
            }, 8);
        }, 70);
        $body.appendChild($elem);
    };
};
</script>
</head>
<body class="fn__flex-column">
<div id="pjax" class="fn__flex-1">
    
    <header class="header header--article">
        <div class="wrapper header__title">
            <h1 class="header__h1 fn__flex-inline">
                <img src="https://s2.ax1x.com/2020/01/12/loApPe.png" alt="Kosmos">
                <a href="https://ellenbboe.github.io" rel="start" class="header__title">Kosmos</a>
            </h1>
            <h2 class="header__h2">---我们总得选择一条路去前行---</h2>
        </div>
        <nav class="wrapper header__nav fn__clear">
            <a href="https://ellenbboe.github.io" rel="start">
                    Kosmos
            </a>

                <a class="fn__flex-inline" href="https://github.com/ellenbboe" target="_self" rel="section">
                    <img src="https://s2.ax1x.com/2020/01/16/ljWMPP.png" alt="我的GIT"> 我的GIT
                </a>
                <a class="fn__flex-inline" href="/readlist" target="_self" rel="section">
                    <img src="https://s2.ax1x.com/2020/01/16/ljWPC6.png" alt="阅读列表"> 阅读列表
                </a>


            <div class="fn__right">
    <a href="https://hacpai.com/member/ellenbboe"
       title="https://hacpai.com/member/ellenbboe"
       class="user__site"
       target="_blank" rel="noopener nofollow">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path fill="#d23f31" style="fill: var(--color1, #d23f31)" d="M5.787 17.226h17.033l5.954 9.528c0.47 0.752 0.003 1.361-1.042 1.361h-15.141z"></path>
            <path d="M10.74 3.927h17.033c1.045 0 1.512 0.609 1.042 1.361l-5.954 9.528h-19.872l6.379-10.209c0.235-0.376 0.849-0.681 1.372-0.681z"></path>
            <path d="M2.953 17.226h2.839l6.804 10.889h-1.892c-0.523 0-1.137-0.305-1.372-0.681z"></path>
        </svg>
    </a>

        <a href="https://github.com/ellenbboe"
           title="https://github.com/ellenbboe"
           class="user__site"
           target="_blank" rel="noopener nofollow">
            <svg viewBox="0 0 32 32" width="100%" height="100%">
                <path d="M16 0.331c-8.836 0-16 7.163-16 16 0 7.069 4.585 13.067 10.942 15.182 0.8 0.148 1.094-0.347 1.094-0.77 0-0.381-0.015-1.642-0.022-2.979-4.452 0.968-5.391-1.888-5.391-1.888-0.728-1.849-1.776-2.341-1.776-2.341-1.452-0.993 0.11-0.973 0.11-0.973 1.606 0.113 2.452 1.649 2.452 1.649 1.427 2.446 3.743 1.739 4.656 1.33 0.143-1.034 0.558-1.74 1.016-2.14-3.554-0.404-7.29-1.777-7.29-7.907 0-1.747 0.625-3.174 1.649-4.295-0.166-0.403-0.714-2.030 0.155-4.234 0 0 1.344-0.43 4.401 1.64 1.276-0.355 2.645-0.532 4.005-0.539 1.359 0.006 2.729 0.184 4.008 0.539 3.054-2.070 4.395-1.64 4.395-1.64 0.871 2.204 0.323 3.831 0.157 4.234 1.026 1.12 1.647 2.548 1.647 4.295 0 6.145-3.743 7.498-7.306 7.895 0.574 0.497 1.085 1.47 1.085 2.963 0 2.141-0.019 3.864-0.019 4.391 0 0.426 0.288 0.925 1.099 0.768 6.354-2.118 10.933-8.113 10.933-15.18 0-8.837-7.164-16-16-16z"></path>
            </svg>
        </a>

                <a rel="alternate" href="https://ellenbboe.github.io/rss.xml">
                    RSS
                </a>

            </div>
        </nav>
    </header>
    <div class="article__top">
        <div class="fn__clear">
            <div class="toc fn__none" onclick="$('.post__toc').slideToggle()">目录</div>
            <div class="title fn__pointer" onclick="Util.goTop()">Scrapy Pass 4</div>
<div class="article__share"
     data-title="Scrapy Pass 4"
     data-blogtitle="Kosmos"
     data-url="https://ellenbboe.github.io/articles/2018/08/17/1561009675994.html"
     data-avatar="https://img.hacpai.com/avatar/1560335521987_1576387741689.jpeg?imageView2/1/w/128/h/128/interlace/0/q/100">
    <span class="item" data-type="qqz">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M22.824 13.989l-8.348 6.287s3.351 0.522 8.404 0.461l-0.23-1.040 7.2-6.549c0.132-0.12 0.183-0.312 0.129-0.487s-0.203-0.299-0.377-0.314l-9.492-0.856-3.708-9.213c-0.068-0.169-0.226-0.279-0.401-0.279s-0.333 0.11-0.401 0.279l-3.708 9.213-9.492 0.856c-0.174 0.015-0.323 0.139-0.377 0.314s-0.004 0.366 0.129 0.487l7.2 6.549-2.158 9.742c-0.040 0.178 0.026 0.365 0.168 0.474 0.142 0.107 0.331 0.115 0.481 0.021l8.158-5.165 8.158 5.165c0.070 0.045 0.147 0.066 0.225 0.066 0.090 0 0.18-0.029 0.256-0.086 0.142-0.109 0.208-0.295 0.168-0.474l-1.707-7.704c0.732-0.386 1.538-1.040 1.538-1.040s-3.195 1.638-14.664 0.838l8.312-6.325s-0.327-0.534-10.744-0.914c-0.697-0.026 8.493-1.83 15.281-0.305z"></path>
        </svg>
    </span>
    <span class="item" data-type="wechat">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M9.062 9.203c0-0.859-0.562-1.422-1.422-1.422-0.844 0-1.703 0.562-1.703 1.422 0 0.844 0.859 1.406 1.703 1.406 0.859 0 1.422-0.562 1.422-1.406zM20.672 17.125c0-0.562-0.562-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.859 0 1.422-0.562 1.422-1.141zM16.984 9.203c0-0.859-0.562-1.422-1.406-1.422-0.859 0-1.703 0.562-1.703 1.422 0 0.844 0.844 1.406 1.703 1.406 0.844 0 1.406-0.562 1.406-1.406zM26.906 17.125c0-0.562-0.578-1.125-1.422-1.125-0.562 0-1.125 0.562-1.125 1.125 0 0.578 0.562 1.141 1.125 1.141 0.844 0 1.422-0.562 1.422-1.141zM22.75 10.922c-0.359-0.047-0.719-0.063-1.094-0.063-5.375 0-9.625 4.016-9.625 8.953 0 0.828 0.125 1.625 0.359 2.375-0.359 0.031-0.703 0.047-1.063 0.047-1.422 0-2.547-0.281-3.969-0.562l-3.953 1.984 1.125-3.406c-2.828-1.984-4.531-4.547-4.531-7.656 0-5.391 5.094-9.625 11.328-9.625 5.563 0 10.453 3.391 11.422 7.953zM32 19.687c0 2.547-1.688 4.813-3.969 6.516l0.859 2.828-3.109-1.703c-1.141 0.281-2.281 0.578-3.406 0.578-5.391 0-9.625-3.688-9.625-8.219s4.234-8.219 9.625-8.219c5.094 0 9.625 3.688 9.625 8.219z"></path>
        </svg>
    </span>
    <span class="item" data-type="weibo">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M13.444 27.064c-5.3 0.525-9.875-1.875-10.219-5.35-0.344-3.481 3.675-6.719 8.969-7.244 5.3-0.525 9.875 1.875 10.212 5.35 0.35 3.481-3.669 6.725-8.963 7.244zM24.038 15.521c-0.45-0.137-0.762-0.225-0.525-0.819 0.512-1.287 0.563-2.394 0.006-3.188-1.038-1.481-3.881-1.406-7.137-0.037 0 0-1.025 0.444-0.762-0.363 0.5-1.613 0.425-2.956-0.356-3.737-1.769-1.769-6.469 0.069-10.5 4.1-3.013 3.006-4.763 6.212-4.763 8.981 0 5.287 6.787 8.506 13.425 8.506 8.7 0 14.494-5.056 14.494-9.069 0-2.431-2.044-3.806-3.881-4.375z"></path>
            <path d="M29.819 5.833c-2.1-2.331-5.2-3.219-8.063-2.612v0c-0.663 0.144-1.081 0.794-0.938 1.45 0.144 0.662 0.788 1.081 1.45 0.938 2.038-0.431 4.238 0.2 5.731 1.856s1.9 3.913 1.256 5.888v0c-0.206 0.644 0.144 1.331 0.788 1.544 0.644 0.206 1.331-0.144 1.544-0.787v-0.006c0.9-2.762 0.331-5.938-1.769-8.269z"></path>
            <path d="M26.588 8.752c-1.025-1.138-2.538-1.569-3.925-1.269-0.569 0.119-0.931 0.688-0.813 1.256 0.125 0.569 0.688 0.931 1.25 0.806v0c0.681-0.144 1.419 0.069 1.919 0.619 0.5 0.556 0.637 1.313 0.419 1.975v0c-0.175 0.55 0.125 1.15 0.681 1.331 0.556 0.175 1.15-0.125 1.331-0.681 0.438-1.356 0.163-2.906-0.863-4.037z"></path>
            <path d="M13.738 20.771c-0.188 0.319-0.594 0.469-0.912 0.337-0.319-0.125-0.412-0.488-0.231-0.794 0.188-0.306 0.581-0.456 0.894-0.337 0.313 0.113 0.425 0.469 0.25 0.794zM12.044 22.933c-0.512 0.819-1.613 1.175-2.438 0.8-0.813-0.369-1.056-1.319-0.544-2.119 0.506-0.794 1.569-1.15 2.388-0.806 0.831 0.356 1.1 1.3 0.594 2.125zM13.969 17.146c-2.519-0.656-5.369 0.6-6.463 2.819-1.119 2.262-0.037 4.781 2.506 5.606 2.638 0.85 5.75-0.456 6.831-2.894 1.069-2.394-0.262-4.85-2.875-5.531z"></path>
        </svg>
    </span>
    <span class="item" data-type="twitter">
        <svg viewBox="0 0 32 32" width="100%" height="100%">
            <path d="M32.003 6.075c-1.175 0.525-2.444 0.875-3.769 1.031 1.356-0.813 2.394-2.1 2.887-3.631-1.269 0.75-2.675 1.3-4.169 1.594-1.2-1.275-2.906-2.069-4.794-2.069-3.625 0-6.563 2.938-6.563 6.563 0 0.512 0.056 1.012 0.169 1.494-5.456-0.275-10.294-2.888-13.531-6.862-0.563 0.969-0.887 2.1-0.887 3.3 0 2.275 1.156 4.287 2.919 5.463-1.075-0.031-2.087-0.331-2.975-0.819 0 0.025 0 0.056 0 0.081 0 3.181 2.263 5.838 5.269 6.437-0.55 0.15-1.131 0.231-1.731 0.231-0.425 0-0.831-0.044-1.237-0.119 0.838 2.606 3.263 4.506 6.131 4.563-2.25 1.762-5.075 2.813-8.156 2.813-0.531 0-1.050-0.031-1.569-0.094 2.913 1.869 6.362 2.95 10.069 2.95 12.075 0 18.681-10.006 18.681-18.681 0-0.287-0.006-0.569-0.019-0.85 1.281-0.919 2.394-2.075 3.275-3.394z"></path>
        </svg>
    </span>
    <span class="item__qr"></span>
</div>        </div>
        <progress class="article__progress"></progress>
    </div>
    <div class="article">
        <div class="ft__center">
            <div class="item__meta">
                <time>
                    2018-08-17
                </time>
                /
                    <a class="tag" rel="tag"
                       href="https://ellenbboe.github.io/tags/Scrapy">Scrapy</a> &nbsp;
            </div>
            <h2 class="item__title">
                Scrapy Pass 4
            </h2>
        </div>
        <div class="item__cover" style="background-image: url(https://img.hacpai.com/bing/20180909.jpg?imageView2/1/w/1280/h/720/interlace/1/q/100)"></div>
        <div class="wrapper">
            <section class="item__content item__content--article vditor-reset">
                <h2 id="toc_h2_0">Command line tool</h2>
<p>New in version 0.10.</p>
<p>Scrapy is controlled through the <code>scrapy</code> command-line tool, to be referred here as the “Scrapy tool” to differentiate it from the sub-commands, which we just call “<code>commands</code>” or “<code>Scrapy commands</code>”.</p>
<p>The Scrapy tool provides several commands, for multiple purposes, and each one accepts a different set of arguments and options.</p>
<h3 id="toc_h3_1">Configuration settings</h3>
<p>Scrapy will <strong>look for</strong> configuration parameters in ini-style <code>scrapy.cfg</code> files in standard locations:</p>
<ol>
<li><code>/etc/scrapy.cfg</code> or <code>c:\scrapy\scrapy.cfg</code> (system-wide),</li>
<li>~/.config/scrapy.cfg ($XDG_CONFIG_HOME) and ~/.scrapy.cfg ($HOME) for global (user-wide) settings, and</li>
<li>scrapy.cfg inside a scrapy project’s root (see next section).<br>
Settings from these files are merged in the listed order of preference: user-defined values have higher priority than system-wide defaults and project-wide settings will override all others, when defined.<br>
<strong>(优先级依次递增)</strong><br>
Scrapy also understands, and can be configured through, a number of environment variables. Currently these are:</li>
</ol>
<blockquote>
<p>SCRAPY_SETTINGS_MODULE (see Designating the settings)<br>
SCRAPY_PROJECT<br>
SCRAPY_PYTHON_SHELL (see Scrapy shell)</p>
</blockquote>
<h3 id="toc_h3_2">Default structure of Scrapy projects</h3>
<p>Before delving into the command-line tool and its sub-commands, let’s first understand the directory structure of a Scrapy project.</p>
<p>Though it can be modified, all Scrapy projects have the same file structure by default, similar to this:</p>
<pre><code>scrapy.cfg
myproject/
    __init__.py
    items.py
    middlewares.py
    pipelines.py
    settings.py
    spiders/
        __init__.py
        spider1.py
        spider2.py
        ...
</code></pre>
<p>The directory where the <code>scrapy.cfg</code> file resides is known as the project root directory. <strong>That file</strong> contains the name of the python module that defines the project settings. Here is an example:</p>
<pre><code>[settings]
default = myproject.settings
</code></pre>
<h3 id="toc_h3_3">Using the scrapy tool</h3>
<p>You can start by running the Scrapy tool with no arguments and it will print some usage help and the available commands:</p>
<pre><code>Scrapy X.Y - no active project

Usage:
  scrapy &lt;command&gt; [options] [args]

Available commands:
  crawl         Run a spider
  fetch         Fetch a URL using the Scrapy downloader
[...]
</code></pre>
<p>The first line will print the currently active project if you’re inside a Scrapy project. In this example it was run from outside a project. If run from inside a project it would have printed something like this:</p>
<pre><code>Scrapy X.Y - project: myproject

Usage:
  scrapy &lt;command&gt; [options] [args]

[...]
</code></pre>
<h3 id="toc_h3_4">Creating projects</h3>
<p>The first thing you typically do with the scrapy tool is create your Scrapy project:<br>
<code>scrapy startproject myproject [project_dir]</code><br>
That will create a Scrapy project under the project_dir directory. If project_dir wasn’t specified, project_dir will be the same as myproject.<br>
Next, you go inside the new project directory:<br>
<code>cd project_dir</code><br>
And you’re ready to use the <code>scrapy command</code> to manage and control your project from <strong>there</strong>(<strong>project_dir</strong>).</p>
<h3 id="toc_h3_5">Controlling projects</h3>
<p>You use the scrapy tool from inside your projects to control and manage them.<br>
For example, to create a new spider:<br>
<code>scrapy genspider mydomain mydomain.com</code><br>
Some Scrapy commands (like <code>crawl</code>) must be run from <strong>inside</strong> a Scrapy project.</p>
<p>Also keep in mind that some commands may have slightly different behaviours when running them from inside projects. For example, the fetch command will use spider-overridden behaviours (such as the <code>user_agent</code> attribute to override the user-agent) if the url being fetched is associated with some specific spider. This is intentional, as the fetch command is meant to be used to check how spiders are downloading pages.(注意某一些特殊命令会有不同的行为,这不废话吗)</p>
<h3 id="toc_h3_6">Available tool commands</h3>
<p>This section contains a list of the available built-in commands with a description and some usage examples. Remember, you can always get more info about each command by running:<br>
<code>scrapy &lt;command&gt; -h</code><br>
And you can see all available commands with:<br>
<code>scrapy -h</code><br>
There are <strong>two</strong> kinds of commands, those that only work from inside a Scrapy project (<strong>Project-specific commands</strong>) and those that also work without an active Scrapy project (<strong>Global commands</strong>), though they may behave slightly different when running from inside a project (as they would use the project overridden settings).</p>
<h4 id="toc_h4_7">Global commands:</h4>
<pre><code>startproject
genspider
settings
runspider
shell
fetch
view
version
</code></pre>
<h4 id="toc_h4_8">Project-only commands:</h4>
<pre><code>crawl
check
list
edit
parse
bench
</code></pre>
<h4 id="toc_h4_9">startproject(创建项目)</h4>
<blockquote>
<p>Syntax: scrapy startproject &lt;project_name&gt; [project_dir]<br>
Requires project: no</p>
</blockquote>
<p>Creates a new <code>Scrapy projec</code>t named <code>project_name</code>, under the project_dir directory. If <code>project_dir</code> wasn’t specified, <code>project_dir</code> will be the same as <code>project_name</code>.</p>
<p>Usage example:<br>
<code>$ scrapy startproject myproject</code></p>
<h4 id="toc_h4_10">genspider</h4>
<blockquote>
<p>Syntax: scrapy genspider [-t template] <name> <domain><br>
Requires project: no</domain></name></p>
</blockquote>
<p>Create a new spider in the current folder or in the current project’s spiders folder, if called from inside a project. The <strong><name></name></strong> parameter is set as the <strong>spider’s name</strong>, while <strong><domain></domain></strong> is used to <strong>generate the allowed_domains</strong> and <strong>start_urls</strong> spider’s attributes.</p>
<p>Usage example:</p>
<pre><code>$ scrapy genspider -l
Available templates:
  basic
  crawl
  csvfeed
  xmlfeed

$ scrapy genspider example example.com
Created spider 'example' using template 'basic'

$ scrapy genspider -t crawl scrapyorg scrapy.org
Created spider 'scrapyorg' using template 'crawl'
</code></pre>
<p>This is just a convenience shortcut command for creating spiders based on pre-defined templates, but certainly not the only way to create spiders. You can just create the spider source code files yourself, instead of using this command.</p>
<h4 id="toc_h4_11">crawl</h4>
<blockquote>
<p>Syntax: scrapy crawl <spider><br>
Requires project: yes<br>
Start crawling using a spider.</spider></p>
</blockquote>
<p>Usage examples:</p>
<pre><code>$ scrapy crawl myspider
[ ... myspider starts crawling ... ]
</code></pre>
<h4 id="toc_h4_12">check</h4>
<blockquote>
<p>Syntax: scrapy check [-l] <spider><br>
Requires project: yes<br>
Run contract checks.(链接测试)</spider></p>
</blockquote>
<p>Usage examples:</p>
<pre><code>$ scrapy check -l
first_spider
  * parse
  * parse_item
second_spider
  * parse
  * parse_item

$ scrapy check
[FAILED] first_spider:parse_item
&gt;&gt;&gt; 'RetailPricex' field is missing

[FAILED] first_spider:parse
&gt;&gt;&gt; Returned 92 requests, expected 0..4
</code></pre>
<h4 id="toc_h4_13">list(列出项目中的所有spider)</h4>
<blockquote>
<p>Syntax: scrapy list<br>
Requires project: yes<br>
List all available <strong>spiders</strong> in the current project. The output is one spider per line.</p>
</blockquote>
<p>Usage example:</p>
<pre><code>$ scrapy list
spider1
spider2
</code></pre>
<h4 id="toc_h4_14">edit(编辑)</h4>
<blockquote>
<p>Syntax: scrapy edit <spider><br>
Requires project: yes<br>
Edit the given spider using the editor defined in the EDITOR environment variable or (if unset) the EDITOR setting.<br>
(我觉得我可能不会用到)</spider></p>
</blockquote>
<p>This command is provided only as a convenience shortcut for the most common case, the developer is of course free to choose any tool or IDE to write and debug spiders.</p>
<p>Usage example:</p>
<pre><code>$ scrapy edit spider1
</code></pre>
<h4 id="toc_h4_15">fetch (下载页面代码)</h4>
<blockquote>
<p>Syntax: scrapy fetch <url><br>
Requires project: no<br>
Downloads the given URL using the Scrapy downloader and writes the contents to standard output.</url></p>
</blockquote>
<p>The interesting thing about this command is that it fetches the page how the spider would download it. For example, if the spider has a USER_AGENT attribute which overrides the User Agent, it will use that one.</p>
<p>So this command can be used to “see” how your spider would fetch a certain page.</p>
<p>If used <strong>outside a project</strong>, no particular per-spider behaviour would be applied and it will just use the <strong>default Scrapy downloader settings</strong>.</p>
<p>Supported options:</p>
<p><code>--spider=SPIDER</code>: bypass spider autodetection and force use of specific spider<br>
<code>--headers</code>: print the response’s HTTP headers instead of the response’s body<br>
<code>--no-redirect</code>: do not follow HTTP 3xx redirects (default is to follow them)</p>
<p>Usage examples:</p>
<pre><code>$ scrapy fetch --nolog http://www.example.com/some/page.html
[ ... html content here ... ]

$ scrapy fetch --nolog --headers http://www.example.com/
{'Accept-Ranges': ['bytes'],
 'Age': ['1263   '],
 'Connection': ['close     '],
 'Content-Length': ['596'],
 'Content-Type': ['text/html; charset=UTF-8'],
 'Date': ['Wed, 18 Aug 2010 23:59:46 GMT'],
 'Etag': ['"573c1-254-48c9c87349680"'],
 'Last-Modified': ['Fri, 30 Jul 2010 15:30:18 GMT'],
 'Server': ['Apache/2.2.3 (CentOS)']}
</code></pre>
<h4 id="toc_h4_16">view</h4>
<blockquote>
<p>Syntax: scrapy view <url><br>
Requires project: no<br>
Opens the given URL in a browser, as your Scrapy spider would “see” it. Sometimes spiders see pages differently from regular users, so this can be used to check what the spider “sees” and confirm it’s what you expect.</url></p>
</blockquote>
<p>Supported options:</p>
<p><code>--spider=SPIDER</code>: bypass spider autodetection and force use of specific spider<br>
<code>--no-redirect</code>: do not follow HTTP 3xx redirects (default is to follow them)<br>
Usage example:</p>
<pre><code>$ scrapy view http://www.example.com/some/page.html
[ ... browser starts ... ]
</code></pre>
<h4 id="toc_h4_17">shell</h4>
<blockquote>
<p>Syntax: scrapy shell [url]<br>
Requires project: no<br>
Starts the Scrapy shell for the given URL (if given) or empty if no URL is given. Also supports UNIX-style local file paths, either relative with ./ or ../ prefixes or absolute file paths. See Scrapy shell for more info.</p>
</blockquote>
<p>Supported options:</p>
<p><code>--spider=SPIDER</code>: bypass spider autodetection and force use of specific spider<br>
<code>-c code</code>(设置返回状态): evaluate the code in the shell, print the result and exit<br>
<code>--no-redirect</code>: do not follow HTTP 3xx redirects (default is to follow them); this only affects the URL you may pass as argument on the command line; once you are inside the shell, fetch(url) will still follow HTTP redirects by default.<br>
Usage example:</p>
<pre><code>$ scrapy shell http://www.example.com/some/page.html
[ ... scrapy shell starts ... ]

$ scrapy shell --nolog http://www.example.com/ -c '(response.status, response.url)'
(200, 'http://www.example.com/')

# shell follows HTTP redirects by default
$ scrapy shell --nolog http://httpbin.org/redirect-to?url=http%3A%2F%2Fexample.com%2F -c '(response.status, response.url)'
(200, 'http://example.com/')

# you can disable this with --no-redirect
# (only for the URL passed as command line argument)
$ scrapy shell --no-redirect --nolog http://httpbin.org/redirect-to?url=http%3A%2F%2Fexample.com%2F -c '(response.status, response.url)'
(302, 'http://httpbin.org/redirect-to?url=http%3A%2F%2Fexample.com%2F')
</code></pre>
<h4 id="toc_h4_18">parse</h4>
<blockquote>
<p>Syntax: scrapy parse <url> [options]<br>
Requires project: yes<br>
Fetches the given URL and parses it with the spider that handles it, using the method passed with the --callback option, or parse if not given.</url></p>
</blockquote>
<p>Supported options:</p>
<p><code>--spider=SPIDER</code>: bypass spider autodetection and force use of specific spider<br>
<code>--a NAME=VALUE</code>: set spider argument (may be repeated)<br>
<code>--callback or -c</code>: spider method to use as callback for parsing the response<br>
<code>--meta or -m</code>: additional request meta that will be passed to the callback request. This must be a valid json string. Example: –meta=’{“foo” : “bar”}’<br>
<code>--pipelines</code>: process items through pipelines<br>
<code>--rules or -r</code>: use CrawlSpider rules to discover the callback (i.e. spider method) to use for parsing the response<br>
<code>--noitems</code>: don’t show scraped items<br>
<code>--nolinks</code>: don’t show extracted links<br>
<code>--nocolour</code>: avoid using pygments to colorize the output<br>
<code>--depth or -d</code>: depth level for which the requests should be followed recursively (default: 1)<br>
<code>--verbose or -v</code>: display information for each depth level<br>
Usage example:</p>
<pre><code>$ scrapy parse http://www.example.com/ -c parse_item
[ ... scrapy log lines crawling example.com spider ... ]

&gt;&gt;&gt; STATUS DEPTH LEVEL 1 &lt;&lt;&lt;
# Scraped Items  ------------------------------------------------------------
[{'name': u'Example item',
 'category': u'Furniture',
 'length': u'12 cm'}]

# Requests  -----------------------------------------------------------------
[]
</code></pre>
<h4 id="toc_h4_19">settings</h4>
<blockquote>
<p>Syntax: scrapy settings [options]<br>
Requires project: no<br>
Get the value of a Scrapy setting.</p>
</blockquote>
<p>If used inside a project it’ll show the project setting value, otherwise it’ll show the default Scrapy value for that setting.</p>
<p>Example usage:</p>
<pre><code>$ scrapy settings --get BOT_NAME
scrapybot
$ scrapy settings --get DOWNLOAD_DELAY
0
</code></pre>
<h4 id="toc_h4_20">runspider(单纯的运行文件)</h4>
<blockquote>
<p>Syntax: scrapy runspider &lt;spider_file.py&gt;<br>
Requires project: no<br>
Run a spider self-contained in a Python file, without having to create a project.</p>
</blockquote>
<p>Example usage:</p>
<pre><code>$ scrapy runspider myspider.py
[ ... spider starts crawling ... ]
</code></pre>
<h4 id="toc_h4_21">version</h4>
<blockquote>
<p>Syntax: scrapy version [-v]<br>
Requires project: no<br>
Prints the Scrapy version. If used with -v it also prints Python, Twisted and Platform info, which is useful for bug reports.</p>
</blockquote>
<h4 id="toc_h4_22">bench(估计用不着)</h4>
<p>New in version 0.17.</p>
<blockquote>
<p>Syntax: scrapy bench<br>
Requires project: no<br>
Run a quick benchmark test. Benchmarking.</p>
</blockquote>
                    <div>
                        <hr>
<img alt="今日诗词" src="https://v2.jinrishici.com/one.svg" style="max-width:100%; display: block; margin: 0 auto;">

标题：Scrapy Pass 4<br>
作者：<a href="https://ellenbboe.github.io" target="_blank">ellenbboe</a><br>
地址：<a href="https://ellenbboe.github.io/articles/2018/08/17/1561009675994.html" target="_blank">https://ellenbboe.github.io/articles/2018/08/17/1561009675994.html</a><br>
<!-- 签名档内可使用 HTML、JavaScript -->
<br>

                    </div>
            </section>
        </div>
    </div>
        <div class="post__toc">
<ul class="article__toc">
        <li class="toc__h2">
            <a href="#toc_h2_0">Command line tool</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_1">Configuration settings</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_2">Default structure of Scrapy projects</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_3">Using the scrapy tool</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_4">Creating projects</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_5">Controlling projects</a>
        </li>
        <li class="toc__h3">
            <a href="#toc_h3_6">Available tool commands</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_7">Global commands:</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_8">Project-only commands:</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_9">startproject(创建项目)</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_10">genspider</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_11">crawl</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_12">check</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_13">list(列出项目中的所有spider)</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_14">edit(编辑)</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_15">fetch (下载页面代码)</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_16">view</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_17">shell</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_18">parse</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_19">settings</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_20">runspider(单纯的运行文件)</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_21">version</a>
        </li>
        <li class="toc__h4">
            <a href="#toc_h4_22">bench(估计用不着)</a>
        </li>
</ul>        </div>
        <div id="b3logsolocomments"></div>
        <div id="vcomment" class="comment__wrapper wrapper" style="margin: 40px auto" data-name="ellenbboe" data-postId="1561009675994"></div>
    <div class="article__bottom">
        <div class="wrapper">
            <div class="fn__flex">
                <div class="item" id="randomArticles"></div>
                <div class="item" id="relevantArticles"></div>
            </div>
        </div>
    </div>
    
</div>
<footer class="footer">
    <div class="wrapper fn__clear">
        <div class="fn__left">
            <br>
            &copy; 2020
            <a href="https://ellenbboe.github.io">Kosmos</a>
            <a href="http://www.beian.miit.gov.cn/">浙ICP备18045840号-1</a>--------Let's move on
本站已安全运行:
<span id="momk"></span>
<script language=javascript>
function show_date_time(){
window.setTimeout("show_date_time()", 1000);
BirthDay=new Date("09-10-2018 19:47:57");//建站日期
today=new Date();
timeold=(today.getTime()-BirthDay.getTime());
sectimeold=timeold/1000
secondsold=Math.floor(sectimeold);
msPerDay=24*60*60*1000
e_daysold=timeold/msPerDay
daysold=Math.floor(e_daysold);
e_hrsold=(daysold-e_daysold)*-24;
hrsold=Math.floor(e_hrsold);
e_minsold=(hrsold-e_hrsold)*-60;
minsold=Math.floor((hrsold-e_hrsold)*-60);
seconds=Math.floor((minsold-e_minsold)*-60);
momk.innerHTML=daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒" ;
}
show_date_time();
</script>
<style>
#momk{animation:change 10s infinite;font-weight:800; }
@keyframes change{0%{color:#5cb85c;}25%{color:#556bd8;}50%{color:#e40707;}75%{color:#66e616;}100% {color:#67bd31;}}
</style>
<script type="text/javascript">
    /*自动刷新页面，避免无法访问*/
    var OriginTitile = document.title;
    var titleTime;
    document.addEventListener('visibilitychange', function () {
        if (document.hidden) {
            document.title = '(〃´-ω･)  休息一下';
            clearTimeout(titleTime);
        } else {
            document.title = '起来嗨٩(๑❛ᴗ❛๑)۶';
            titleTime = setTimeout(function () {
                document.title = OriginTitile;
            }, 3000);
        }
    });
</script>
        </div>
        <div class="fn__right">
            <a href="https://ellenbboe.github.io/tags.html" rel="section">
            标签墙
            </a>
            &nbsp;•&nbsp;
            <a href="https://ellenbboe.github.io/archives.html">
            存档
            </a>
            &nbsp;•&nbsp;
            <a rel="archive" href="https://ellenbboe.github.io/links.html">
            友情链接
            </a>
            <br>
            121 文章 &nbsp;
            <span data-uvstaturl="https://ellenbboe.github.io">11608</span> 浏览 &nbsp;
            
        </div>
    </div>
</footer>

<script>
  var Label = {
    servePath: "https://ellenbboe.github.io",
    staticServePath: "https://ellenbboe.github.io",
    luteAvailable: false,
    hljsStyle: 'colorful',
    langLabel: "zh_CN",
    version: "4.1.0",
    staticSite: true,
    showCodeBlockLn: false,
  }
</script>
<script type="text/javascript"
        src="https://ellenbboe.github.io/skins/Casper/js/common.min.js?1591150301084"
        charset="utf-8"></script>


<script type="text/javascript">
    Util.addScript('https://ellenbboe.github.io/js/page.min.js?1591150301084', 'soloPageScript')
    var page = new Page({
        "commentContentCannotEmptyLabel": "评论内容只能为 2 到 500 个字符！",
        "oId": "1561009675994",
        "blogHost": "https://ellenbboe.github.io",
        "randomArticles1Label": "随机阅读：",
        "externalRelevantArticles1Label": "站外相关阅读："
    });
    $(document).ready(function () {
        page.load();
    page.tips.externalRelevantArticlesDisplayCount = "0";
    Skin.initArticle()
    });
</script>

</body>
</html>

<!-- Generated by Latke (https://github.com/88250/latke) in 98ms, 2020/06/03 12:32:31 -->